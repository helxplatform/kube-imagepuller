# imagepuller

Pull container images to your nodes so that they are already present when containers are launched.

![Version: 0.2.0](https://img.shields.io/badge/Version-0.2.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 0.1.3](https://img.shields.io/badge/AppVersion-0.1.3-informational?style=flat-square)

## Installation and configuration

Add kube-imagepuller Helm repository:
```
helm repo add kube-imagepuller https://helxplatform.github.io/kube-imagepuller/charts
```

Pull a public image from Docker Hub:
```
helm install imagepuller kube-imagepuller/imagepuller \
    --set "initPuller.args={copy-images,-i,itaysk/cyan:blue}"
```

Pull public images from Docker Hub:
```
helm install imagepuller kube-imagepuller/imagepuller \
    --set "initPuller.args.images={itaysk/cyan:blue,itaysk/cyan:red}"
```

Pull a private image from Docker Hub. This assumes a Kubernetes :

```
kubectl create secret docker-registry regcred --docker-username=itaysk --docker-password='***'

helm install imagepuller kube-imagepuller/imagepuller \
    --set "initPuller.args.images={itaysk/cyan:blue}" \
    --set initPuller.pullSecret.enabled=true
```

Pull and rename a public image from Docker Hub (the run-skopeo.sh script passes
these args directly to the skopeo executable):
```
helm install imagepuller kube-imagepuller/imagepuller \
    --set "initPuller.args.mainCommand=copy,initPuller.args.scopioArgs={docker://index.docker.io/itaysk/cyan:blue,docker-daemon:myorg/mycyan:v1}"
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"helxplatform/skopeo"` |  |
| initPuller.args.images | list | `["from/this:tag","from/that:tag"]` | A list of images to be copied by multiple calls to scopio with the run-scopio.sh script. |
| initPuller.args.mainCommand | string | `"copy-images"` | Currently the only non-scopio command is 'copy-images', run-scopio.sh will forward any other command and remaining arguments directly to scopio. |
| initPuller.args.nonImageArgs | list | `["--src-transport","docker","--src-prefix","//index.docker.io/","--dst-transport","docker-daemon","--","--command-timeout","0"]` | Arguments for run-scopio.sh script not sent directly to scopio. Default values are below. |
| initPuller.args.scopioArgs | object | `{}` | Arguments for scopio if you are using one of the regular scopio commands. |
| initPuller.pullSecret | object | `{"enabled":false,"key":".dockerconfigjson","name":"regcred"}` | You can specify a secret to use for pulling images.  The default service account's registry credentials are not used since the copy is done through /var/run/docker.sock. |
| initPuller.secretMountPath | string | `"/root"` |  |
| initPuller.secretProjection | string | `".docker/config.json"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
